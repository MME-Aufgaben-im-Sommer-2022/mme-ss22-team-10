var S=Object.defineProperty;var x=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var r=(o,e,t)=>(x(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();class T extends HTMLElement{constructor(t,s){super();r(this,"html");r(this,"css");this.html=t!=null?t:"",this.css=s!=null?s:"",this.attachShadow({mode:"open"})}notifyAll(t,s){const n=new CustomEvent(t,{detail:s});this.dispatchEvent(n)}get root(){if(this.shadowRoot)return this.shadowRoot;throw new Error("WebComponent.root is not available yet")}select(t){return this.root.querySelector(t)}selectAll(t){return this.root.querySelectorAll(t)}async connectedCallback(){this.loadStylesheet(),this.loadHtml(),this.onCreate()}loadStylesheet(){if(this.css!==""){const t=document.createElement("style");t.innerHTML=this.css,this.root.appendChild(t)}}loadHtml(){if(this.html!==""){const t=document.createElement("template");t.innerHTML=this.html,this.root.appendChild(t.content.cloneNode(!0))}}}const A=`p{display:inline-block;color:#ff871e}.red{color:red}.containter{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}
`,M=`<div class="red containter">
  <h1></h1>
  <div>Count: <span id="count">0</span></div>
  <button>Click here!</button>
</div>
`,m=(...o)=>{console.log(...o)};class y extends T{constructor(t){super(M,A);r(this,"exampleState");r(this,"onButtonClicked",()=>{this.exampleState.value.count++});r(this,"onModelChanged",t=>{this.select("#count").innerHTML=`${this.exampleState.value.count}`,m("COMPONENT Model changed:",t)});this.exampleState=t}get htmlTagName(){return"example-component"}onCreate(){this.root.querySelector("h1").innerHTML=`Hello ${this.exampleState.value.name}!`,this.select("#count").innerHTML=`${this.exampleState.value.count}`,this.select("button").addEventListener("click",this.onButtonClicked),this.exampleState.addEventListener("change",this.onModelChanged)}}const b=Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"})),w="modulepreload",L=function(o){return"/mme-ss22-team-10/"+o},p={},N=function(e,t,s){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=L(n),n in p)return;p[n]=!0;const i=n.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":w,i||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),i)return new Promise((g,C)=>{a.addEventListener("load",g),a.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())},f=class{static async loadAll(){const e=Object.assign({"../../components/ExampleComponent/ExampleComponent.ts":()=>N(()=>Promise.resolve().then(()=>b),void 0)}),t=Object.keys(e);for(const s of t){const n=await e[s](),i=n.default;if(i&&i.prototype.htmlTagName){const l=new P(i.prototype.htmlTagName,i);f.addComponentDefinition(l)}}f.defineAll()}static addComponentDefinition(e){this.componentDefinitions.push(e)}static defineAll(){this.componentDefinitions.forEach(e=>e.defineSelf())}};let h=f;r(h,"componentDefinitions",[]);class P{constructor(e,t){r(this,"name");r(this,"componentConstructor");this.name=e,this.componentConstructor=t}defineSelf(){customElements.define(this.name,this.componentConstructor)}}class H{constructor(e,t){r(this,"type");r(this,"data");this.type=e,this.data=t,Object.freeze(this)}}class O{constructor(){r(this,"listener",{})}addEventListener(e,t){this.listener[e]===void 0&&(this.listener[e]=[]),this.listener[e].push(t)}removeEventListener(e,t){if(this.listener[e]!==void 0){for(let s=0;s<this.listener[e].length;s++)if(this.listener[e][s]===t){this.listener[e].splice(s,1);return}}}notifyAll(e,t){const s=new H(e,t);if(this.listener[s.type]!==void 0)for(let n=0;n<this.listener[s.type].length;n++)this.listener[s.type][n](s)}clear(){this.listener={}}}const d=class extends O{constructor(t){super();r(this,"val");r(this,"id","");r(this,"proxyHandler",{set:(t,s,n)=>(t[s]!==n&&(t[s]=n,this.notifyAll(d.STATE_CHANGE_EVENT,n)),!0),get:(t,s)=>{if(s==="isProxy")return!0;const n=t[s];if(!(typeof n>"u"))return!n.isProxy&&typeof n=="object"?this.createProxy(n):n}});this.generateId(),this.setValue(t)}setValue(t){this.val=typeof t=="object"?this.createProxy(t):t}createProxy(t){return new Proxy(t,this.proxyHandler)}get value(){return this.val}set value(t){this.setValue(t),this.notifyAll(d.STATE_CHANGE_EVENT,this.val)}generateId(){const t=this.constructor.name;let s=d.stateCounts.get(t);s===void 0&&(s=0),d.stateCounts.set(t,s+1),this.id=t+"-"+s,Object.freeze(this.id)}};let c=d;r(c,"STATE_CHANGE_EVENT","change"),r(c,"stateCounts",new Map);class _{constructor(){r(this,"state")}toState(){return this.state||(this.state=new c(this)),this.state}}class E extends _{constructor(t,s){super();r(this,"name");r(this,"count");this.name=t,this.count=s}}class v{static async init(){}static async getExampleModel(){return new E("John",0)}}class u{static async init(){const e=await v.getExampleModel();this.addState(e.toState())}static addState(e){this.states.set(e.id,e)}static getStateById(e){return this.states.get(e)}static findState(e,t){for(const s of this.states.values())if(s.value instanceof t&&e(s.value))return s}static findStates(e,t){const s=[];for(const n of this.states.values())n.value instanceof t&&e(n.value)&&s.push(n);return s}}r(u,"states",new Map);const D=()=>{h.loadAll().then(()=>v.init()).then(()=>u.init()).then(()=>o());function o(){const e=u.findState(s=>s.name==="John",E),t=new y(e);document.querySelector("#app").append(t),e.addEventListener(c.STATE_CHANGE_EVENT,s=>{m("MAIN Model changed:",s),m(u)})}};D();
