var Zt=Object.defineProperty;var te=(l,e,t)=>e in l?Zt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var o=(l,e,t)=>(te(l,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const ee="modulepreload",ne=function(l){return"/"+l},Nt={},_=function(e,t,n){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=ne(i),i in Nt)return;Nt[i]=!0;const s=i.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${r}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":ee,s||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),s)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},Et=class{static async loadAll(){const e=Object.assign({"../../components/Calendar/Calendar/Calendar.ts":()=>_(()=>import("./Calendar.69567c1d.js"),["assets/Calendar.69567c1d.js","assets/Calendar.dbab621c.css","assets/CalendarMonth.42f2ec3b.js","assets/CalendarMonth.3db4954d.css"]),"../../components/Calendar/CalendarDay/CalendarDay.ts":()=>_(()=>Promise.resolve().then(()=>rn),void 0),"../../components/Calendar/CalendarMonth/CalendarMonth.ts":()=>_(()=>import("./CalendarMonth.42f2ec3b.js"),["assets/CalendarMonth.42f2ec3b.js","assets/CalendarMonth.3db4954d.css"]),"../../components/Editor/Editor/Editor.ts":()=>_(()=>Promise.resolve().then(()=>ln),void 0),"../../components/Editor/EditorBlock/EditorBlock.ts":()=>_(()=>Promise.resolve().then(()=>nn),void 0),"../../components/Editor/InputFields/BulletPointInputField/BulletPointInputField.ts":()=>_(()=>Promise.resolve().then(()=>Je),void 0),"../../components/Editor/InputFields/CheckListInputField/CheckListInputField.ts":()=>_(()=>Promise.resolve().then(()=>en),void 0),"../../components/Editor/InputFields/FreeTextInputField/FreeTextInputField.ts":()=>_(()=>Promise.resolve().then(()=>Fe),void 0),"../../components/ExampleComponent/ExampleComponent.ts":()=>_(()=>import("./ExampleComponent.2cc6b437.js"),[]),"../../components/Home/Home.ts":()=>_(()=>Promise.resolve().then(()=>fn),void 0),"../../components/Home/HomeBar/HomeBar.ts":()=>_(()=>import("./HomeBar.151bddcd.js"),["assets/HomeBar.151bddcd.js","assets/HomeBar.2fb13f35.css","assets/UserSettings.43613039.js","assets/UserSettings.a80eeee5.css"]),"../../components/Home/HomeBar/UserSettings/UserSettings.ts":()=>_(()=>import("./UserSettings.43613039.js"),["assets/UserSettings.43613039.js","assets/UserSettings.a80eeee5.css"]),"../../components/Login/Login.ts":()=>_(()=>Promise.resolve().then(()=>Te),void 0),"../../components/Playground/Playground.ts":()=>_(()=>import("./Playground.26099203.js"),["assets/Playground.26099203.js","assets/Playground.7c000385.css"]),"../../components/TemplateConfigurator/InputTypeConfigurator/InputTypeConfigurator.ts":()=>_(()=>Promise.resolve().then(()=>De),void 0),"../../components/TemplateConfigurator/InputTypeConfigurator/InputTypeConfiguratorItem/InputTypeConfiguratorItem.ts":()=>_(()=>Promise.resolve().then(()=>xe),void 0),"../../components/TemplateConfigurator/TemplateConfigurator.ts":()=>_(()=>Promise.resolve().then(()=>Me),void 0),"../../components/TemplateConfigurator/TopicConfigurator/TopicConfigurator.ts":()=>_(()=>Promise.resolve().then(()=>Le),void 0),"../../components/TemplateConfigurator/TopicConfigurator/TopicConfiguratorItem/TopicConfiguratorItem.ts":()=>_(()=>Promise.resolve().then(()=>$e),void 0),"../../components/atomics/DarkModeToggle/DarkModeToggle.ts":()=>_(()=>import("./DarkModeToggle.8c4987e3.js"),["assets/DarkModeToggle.8c4987e3.js","assets/DarkModeToggle.72103ac2.css"]),"../../components/atomics/LiveBulletPointItem/LiveBulletPointItem.ts":()=>_(()=>Promise.resolve().then(()=>Xe),void 0),"../../components/atomics/LiveCheckListItem/LiveCheckListItem.ts":()=>_(()=>Promise.resolve().then(()=>tn),void 0),"../../components/atomics/LiveTextInput/LiveTextInput.ts":()=>_(()=>Promise.resolve().then(()=>We),void 0),"../../components/atomics/Modal/Modal.ts":()=>_(()=>Promise.resolve().then(()=>hn),void 0),"../../components/atomics/Modal/ModalFactory.ts":()=>_(()=>Promise.resolve().then(()=>pn),void 0),"../../components/atomics/Toast/Toast.ts":()=>_(()=>Promise.resolve().then(()=>we),void 0),"../../components/atomics/Toast/ToastFactory.ts":()=>_(()=>Promise.resolve().then(()=>be),void 0)}),t=Object.keys(e);for(const n of t){const i=await e[n](),s=i.default;if(s&&s.prototype.htmlTagName){const r=new ie(s.prototype.htmlTagName,s);Et.addComponentDefinition(r)}}Et.defineAll()}static addComponentDefinition(e){this.componentDefinitions.push(e)}static defineAll(){this.componentDefinitions.forEach(e=>e.defineSelf())}};let Tt=Et;o(Tt,"componentDefinitions",[]);class ie{constructor(e,t){o(this,"name");o(this,"componentConstructor");this.name=e,this.componentConstructor=t}defineSelf(){customElements.define(this.name,this.componentConstructor)}}class nt{static async init(){}static addState(e,t){this.states.set(t!=null?t:e.id.toString(),e)}static getStateById(e){return this.states.get(e)}static findState(e,t){for(const n of this.states.values())if(n.value instanceof t&&e(n.value))return n}static hasState(e){return this.states.has(e)}static findStates(e,t){const n=[];for(const i of this.states.values())i.value instanceof t&&e(i.value)&&n.push(i);return n}}o(nt,"states",new Map);class At{constructor(e,t){o(this,"type");o(this,"data");this.type=e,this.data=t,Object.freeze(this)}}class Vt{constructor(){o(this,"listener",{})}addEventListener(e,t){this.listener[e]===void 0&&(this.listener[e]=[]),this.listener[e].push(t)}removeEventListener(e,t){if(this.listener[e]!==void 0){for(let n=0;n<this.listener[e].length;n++)if(this.listener[e][n]===t){this.listener[e].splice(n,1);return}}}notifyAll(e,t){const n=new At(e,t);if(this.listener[n.type]!==void 0)for(let i=0;i<this.listener[n.type].length;i++)this.listener[n.type][i](n)}notifyAllExcept(e,t,n){const i=new At(e,t);if(this.listener[i.type]!==void 0)for(let s=0;s<this.listener[i.type].length;s++)this.listener[i.type][s]!==n&&this.listener[i.type][s](i)}clear(){this.listener={}}}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lt={exports:{}},se=function(){var l=[],e=[],t=[],n=null,i=function(r,c){return c.split(".").reduce(function(d,f){return d?d[f]:void 0},r||self)},s=function(r,c,d,f){var h=d||null,C=f||[{target:r,property:""}];r instanceof Array&&(r.hasOwnProperty("__length")?r.__length=r.length:Object.defineProperty(r,"__length",{enumerable:!1,value:r.length,writable:!0}));var x=[],B=function(y,T,$){for(var v="",P=null,b=0;b<C.length;b++)P instanceof Array&&!isNaN(C[b].property)&&(C[b].property=P.indexOf(C[b].target)),v=v+"."+C[b].property,P=C[b].target;return v=v+"."+T,v=v.substring(2),$===!0&&(v="/"+v.replace(/\./g,"/")),v},I=function(y){if(h.paused!==!0){var T=typeof c=="number";if(T||c===!0)setTimeout(function(){if(y===x.length){var P=x.slice(0);x=[];for(var b=0;b<h.observers.length;b++)h.observers[b](P)}},T&&c>0?c:10);else{var $=x.slice(0);x=[];for(var v=0;v<h.observers.length;v++)h.observers[v]($)}}},it={get:function(y,T){if(T==="__getTarget")return y;if(T==="__isProxy")return!0;if(T==="__getParent")return function(K){if(typeof K>"u")var K=1;var W=B(y,"__getParent").split(".");return W.splice(-(K+1),K+1),i(h.parentProxy,W.join("."))};if(T==="__getPath"){var $=B(y,"__getParent");return $.slice(0,-12)}var v=y[T];if(y instanceof Date&&v instanceof Function&&v!==null)return v.bind(y);if(v instanceof Object&&v!==null&&y.hasOwnProperty(T)){if(v.__isProxy===!0&&(v=v.__getTarget),v.__targetPosition>-1&&e[v.__targetPosition]!==null){for(var P=t[v.__targetPosition],b=0,R=P.length;b<R;b++)if(h===P[b].observable)return P[b].proxy}var H=C.slice(0);return H.push({target:v,property:T}),s(v,c,h,H)}else return v},deleteProperty:function(y,T){var $=!0;n===q&&($=!1,n=null);var v=Object.assign({},y);if(x.push({type:"delete",target:y,property:T,newValue:null,previousValue:v[T],currentPath:B(y,T),jsonPointer:B(y,T,!0),proxy:q}),$===!0){h.changesPaused||delete y[T];for(var P=0,b=e.length;P<b&&y!==e[P];P++);for(var R=t[P]||[],H=R.length;H--;)R[H].proxy!==q&&(n=R[H].proxy,delete R[H].proxy[T])}return I(x.length),!0},set:function(y,T,$,v){$&&$.__isProxy&&($=$.__getTarget);var P=!0;n===q&&(P=!1,n=null);var b=y[T];if(b!==$||P===!1||T==="length"&&y instanceof Array&&y.__length!==$){var R=!0,H=typeof b,V="update";if(H==="undefined"&&(V="add"),x.push({type:V,target:y,property:T,newValue:$,previousValue:v[T],currentPath:B(y,T),jsonPointer:B(y,T,!0),proxy:q}),T==="length"&&y instanceof Array&&y.__length!==$&&(x[x.length-1].previousValue=y.__length,y.__length=$),P===!0){h.changesPaused||(y[T]=$),R=!1;for(var K=y.__targetPosition,W=t[K].length;W--;)if(h===t[K][W].observable&&e[t[K][W].observable.parentTarget.__targetPosition]!==null){R=!0;break}if(R){for(var a=t[K],u=0,g=a.length;u<g;u++)a[u].proxy!==q&&(n=a[u].proxy,a[u].proxy[T]=$);setTimeout(function(){if(H==="object"&&b!==null){for(var O=Object.keys(y),L=0,E=O.length;L<E;L++)if(y[O[L]]===b)return;var ot=!1;if(function J(X){for(var dt=Object.keys(X),F=0,ht=dt.length;F<ht;F++){var pt=dt[F],Q=X[pt];if(Q instanceof Object&&Q!==null&&J(Q),Q===b){ot=!0;return}}}(y),ot===!0)return;(function J(X){for(var dt=Object.keys(X),F=0,ht=dt.length;F<ht;F++){var pt=X[dt[F]];pt instanceof Object&&pt!==null&&J(pt)}for(var Q=-1,F=0,ht=e.length;F<ht;F++)if(X===e[F]){Q=F;break}if(Q>-1){for(var bt=t[Q],$t=bt.length;$t--;)if(h===bt[$t].observable){bt.splice($t,1);break}bt.length==0&&(e[Q]=null)}})(b)}},1e4)}}R&&I(x.length)}return!0}},U=r.__targetPosition;U>-1||Object.defineProperty(r,"__targetPosition",{value:e.length,writable:!1,enumerable:!1,configurable:!1});var q=new Proxy(r,it);h===null&&(h={parentTarget:r,domDelay:c,parentProxy:q,observers:[],paused:!1,path:C,changesPaused:!1},l.push(h));var wt={target:r,proxy:q,observable:h};return U>-1?(e[U]===null&&(e[U]=r),t[U].push(wt)):(e.push(r),t.push([wt])),q};return{create:function(r,c,d){if(r.__isProxy===!0)var r=r.__getTarget;var f=s(r,c);return typeof d=="function"&&this.observe(f,d),function h(C){for(var x=C.__getTarget,B=Object.keys(x),I=0,it=B.length;I<it;I++){var U=B[I];x[U]instanceof Object&&x[U]!==null&&h(C[U])}}(f),f},observe:function(r,c){for(var d=l.length;d--;)if(l[d].parentProxy===r){l[d].observers.push(c);break}},pause:function(r){for(var c=l.length,d=!1;c--;)if(l[c].parentProxy===r){l[c].paused=!0,d=!0;break}if(d==!1)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(r){for(var c=l.length,d=!1;c--;)if(l[c].parentProxy===r){l[c].paused=!1,d=!0;break}if(d==!1)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(r){for(var c=l.length,d=!1;c--;)if(l[c].parentProxy===r){l[c].changesPaused=!0,d=!0;break}if(d==!1)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(r){for(var c=l.length,d=!1;c--;)if(l[c].parentProxy===r){l[c].changesPaused=!1,d=!0;break}if(d==!1)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(r){for(var c=null,d=!1,f=l.length;f--;)if(l[f].parentProxy===r){c=l[f],d=!0;break}for(var h=t.length;h--;)for(var C=t[h].length;C--;)t[h][C].observable===c&&(t[h].splice(C,1),t[h].length===0&&(e[h]=null));d===!0&&l.splice(f,1)}}}();try{Lt.exports=se}catch{}const gt=class extends Vt{constructor(t){super();o(this,"val");o(this,"id");o(this,"onValueChange",t=>{t.forEach(n=>{this.notifyAll("change",Object.assign({},n,{triggerStateId:this.id}))})});gt.stateCount++,this.id=gt.stateCount,this.val=typeof t=="object"?Lt.exports.create(t,!1,this.onValueChange):t}get value(){return this.val}set value(t){const n=this.val;typeof t!="object"?this.val=t:this.val=Lt.exports.create(t,!1,this.onValueChange),this.onValueChange([{type:"update",property:"",currentPath:"",jsonPointer:"",target:this.val,proxy:this.val.__getProxy,previousValue:n,newValue:this.val}])}get rawValue(){return this.val.__getTarget}createSubState(t){const n=t.split("."),i=n.reduce((s,r)=>{const c=s[r];if(c!==void 0)return c;throw new Ct(r,this)},this);if(typeof i=="object")return new gt(i.__getTarget);throw new Error("SubStates of properties that are Primitives are not supported yet.")}};let M=gt;o(M,"stateCount",0);const Ot=class extends Error{constructor(e,t){super(),this.message=`Key does not exist!
    
    Pro tip: Check the dev docs on how to use the key parameter: ${Ot.DOCS_LINK}
    
    Detailed error:
    ${e} could not be found in "value":${JSON.stringify(t.value)}
    `}};let Ct=Ot;o(Ct,"DOCS_LINK","https://github.com/MME-Aufgaben-im-Sommer-2022/mme-ss22-team-10/blob/master/docs/lib.md#state");class St{constructor(){o(this,"state")}toState(){return this.state||(this.state=new M(this)),this.state}}class ae extends St{constructor(t,n){super();o(this,"today");o(this,"noteDays");this.today=t,this.noteDays=n}getAsDate(t,n,i){return this.noteDays[t]&&this.noteDays[t][n]&&this.noteDays[t][n].includes(i)?new Date(`${n}/${i}/${t}`):null}}var at=(l=>(l.FreeText="free-text-input-field",l.Checkbox="checkbox-input-field",l.BulletPoint="bullet-point-input-field",l))(at||{});class Bt extends St{constructor(t,n){super();o(this,"day");o(this,"blockContents");this.day=t,this.blockContents=n}}class re extends St{constructor(t,n){super();o(this,"username");o(this,"settings");this.username=t,this.settings=n}}const D={ENDPOINT:"https://appwrite.software-engineering.education/v1",PROJECT_ID:"62ebd3a59c321c79a842",DATABASE_ID:"62fbae0b1efed7a00e63",COLLECTION_NOTES:"62fe9ae239d888113070",COLLECTION_BLOCK_CONTENTS:"62feb22a645659407490",COLLECTION_SETTINGS:"62fe9a71958d86baf717",TEST_USER_EMAIL:{VITE_LOGGER_IS_ENABLED:"false",VITE_API_ENDPOINT:"https://appwrite.software-engineering.education/v1",VITE_PROJECT_ID:"62ebd3a59c321c79a842",VITE_DATABASE_ID:"62fbae0b1efed7a00e63",VITE_COLLECTION_NOTES:"62fe9ae239d888113070",VITE_COLLECTION_BLOCK_CONTENTS:"62feb22a645659407490",VITE_COLLECTION_SETTINGS:"62fe9a71958d86baf717",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_TEST_USER_EMAIL,TEST_USER_PASSWORD:{VITE_LOGGER_IS_ENABLED:"false",VITE_API_ENDPOINT:"https://appwrite.software-engineering.education/v1",VITE_PROJECT_ID:"62ebd3a59c321c79a842",VITE_DATABASE_ID:"62fbae0b1efed7a00e63",VITE_COLLECTION_NOTES:"62fe9ae239d888113070",VITE_COLLECTION_BLOCK_CONTENTS:"62feb22a645659407490",VITE_COLLECTION_SETTINGS:"62fe9a71958d86baf717",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_TEST_USER_PASSWORD};var kt={exports:{}};(function(l,e){var t=typeof self<"u"?self:oe,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(r){var c={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function d(a){return a&&DataView.prototype.isPrototypeOf(a)}if(c.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(a){return a&&f.indexOf(Object.prototype.toString.call(a))>-1};function C(a){if(typeof a!="string"&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function x(a){return typeof a!="string"&&(a=String(a)),a}function B(a){var u={next:function(){var g=a.shift();return{done:g===void 0,value:g}}};return c.iterable&&(u[Symbol.iterator]=function(){return u}),u}function I(a){this.map={},a instanceof I?a.forEach(function(u,g){this.append(g,u)},this):Array.isArray(a)?a.forEach(function(u){this.append(u[0],u[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(u){this.append(u,a[u])},this)}I.prototype.append=function(a,u){a=C(a),u=x(u);var g=this.map[a];this.map[a]=g?g+", "+u:u},I.prototype.delete=function(a){delete this.map[C(a)]},I.prototype.get=function(a){return a=C(a),this.has(a)?this.map[a]:null},I.prototype.has=function(a){return this.map.hasOwnProperty(C(a))},I.prototype.set=function(a,u){this.map[C(a)]=x(u)},I.prototype.forEach=function(a,u){for(var g in this.map)this.map.hasOwnProperty(g)&&a.call(u,this.map[g],g,this)},I.prototype.keys=function(){var a=[];return this.forEach(function(u,g){a.push(g)}),B(a)},I.prototype.values=function(){var a=[];return this.forEach(function(u){a.push(u)}),B(a)},I.prototype.entries=function(){var a=[];return this.forEach(function(u,g){a.push([g,u])}),B(a)},c.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function it(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function U(a){return new Promise(function(u,g){a.onload=function(){u(a.result)},a.onerror=function(){g(a.error)}})}function q(a){var u=new FileReader,g=U(u);return u.readAsArrayBuffer(a),g}function wt(a){var u=new FileReader,g=U(u);return u.readAsText(a),g}function y(a){for(var u=new Uint8Array(a),g=new Array(u.length),O=0;O<u.length;O++)g[O]=String.fromCharCode(u[O]);return g.join("")}function T(a){if(a.slice)return a.slice(0);var u=new Uint8Array(a.byteLength);return u.set(new Uint8Array(a)),u.buffer}function $(){return this.bodyUsed=!1,this._initBody=function(a){this._bodyInit=a,a?typeof a=="string"?this._bodyText=a:c.blob&&Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:c.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():c.arrayBuffer&&c.blob&&d(a)?(this._bodyArrayBuffer=T(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||h(a))?this._bodyArrayBuffer=T(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText="",this.headers.get("content-type")||(typeof a=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var a=it(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?it(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(q)}),this.text=function(){var a=it(this);if(a)return a;if(this._bodyBlob)return wt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function P(a){var u=a.toUpperCase();return v.indexOf(u)>-1?u:a}function b(a,u){u=u||{};var g=u.body;if(a instanceof b){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,u.headers||(this.headers=new I(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,!g&&a._bodyInit!=null&&(g=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=u.credentials||this.credentials||"same-origin",(u.headers||!this.headers)&&(this.headers=new I(u.headers)),this.method=P(u.method||this.method||"GET"),this.mode=u.mode||this.mode||null,this.signal=u.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(g)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function R(a){var u=new FormData;return a.trim().split("&").forEach(function(g){if(g){var O=g.split("="),L=O.shift().replace(/\+/g," "),E=O.join("=").replace(/\+/g," ");u.append(decodeURIComponent(L),decodeURIComponent(E))}}),u}function H(a){var u=new I,g=a.replace(/\r?\n[\t ]+/g," ");return g.split(/\r?\n/).forEach(function(O){var L=O.split(":"),E=L.shift().trim();if(E){var ot=L.join(":").trim();u.append(E,ot)}}),u}$.call(b.prototype);function V(a,u){u||(u={}),this.type="default",this.status=u.status===void 0?200:u.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in u?u.statusText:"OK",this.headers=new I(u.headers),this.url=u.url||"",this._initBody(a)}$.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},V.error=function(){var a=new V(null,{status:0,statusText:""});return a.type="error",a};var K=[301,302,303,307,308];V.redirect=function(a,u){if(K.indexOf(u)===-1)throw new RangeError("Invalid status code");return new V(null,{status:u,headers:{location:a}})},r.DOMException=s.DOMException;try{new r.DOMException}catch{r.DOMException=function(u,g){this.message=u,this.name=g;var O=Error(u);this.stack=O.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function W(a,u){return new Promise(function(g,O){var L=new b(a,u);if(L.signal&&L.signal.aborted)return O(new r.DOMException("Aborted","AbortError"));var E=new XMLHttpRequest;function ot(){E.abort()}E.onload=function(){var J={status:E.status,statusText:E.statusText,headers:H(E.getAllResponseHeaders()||"")};J.url="responseURL"in E?E.responseURL:J.headers.get("X-Request-URL");var X="response"in E?E.response:E.responseText;g(new V(X,J))},E.onerror=function(){O(new TypeError("Network request failed"))},E.ontimeout=function(){O(new TypeError("Network request failed"))},E.onabort=function(){O(new r.DOMException("Aborted","AbortError"))},E.open(L.method,L.url,!0),L.credentials==="include"?E.withCredentials=!0:L.credentials==="omit"&&(E.withCredentials=!1),"responseType"in E&&c.blob&&(E.responseType="blob"),L.headers.forEach(function(J,X){E.setRequestHeader(X,J)}),L.signal&&(L.signal.addEventListener("abort",ot),E.onreadystatechange=function(){E.readyState===4&&L.signal.removeEventListener("abort",ot)}),E.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return W.polyfill=!0,s.fetch||(s.fetch=W,s.Headers=I,s.Request=b,s.Response=V),r.Headers=I,r.Request=b,r.Response=V,r.fetch=W,Object.defineProperty(r,"__esModule",{value:!0}),r})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,l.exports=e})(kt,kt.exports);function w(l,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return new(t||(t=Promise))(function(s,r){function c(h){try{f(n.next(h))}catch(C){r(C)}}function d(h){try{f(n.throw(h))}catch(C){r(C)}}function f(h){h.done?s(h.value):i(h.value).then(c,d)}f((n=n.apply(l,e||[])).next())})}class yt{constructor(e){this.client=e}static flatten(e,t=""){let n={};for(const i in e){let s=e[i],r=t?`${t}[${i}]`:i;Array.isArray(s)?n=Object.assign(n,this.flatten(s,r)):n[r]=s}return n}}yt.CHUNK_SIZE=5*1024*1024;class S{}S.equal=(l,e)=>S.addQuery(l,"equal",e);S.notEqual=(l,e)=>S.addQuery(l,"notEqual",e);S.lesser=(l,e)=>S.addQuery(l,"lesser",e);S.lesserEqual=(l,e)=>S.addQuery(l,"lesserEqual",e);S.greater=(l,e)=>S.addQuery(l,"greater",e);S.greaterEqual=(l,e)=>S.addQuery(l,"greaterEqual",e);S.search=(l,e)=>S.addQuery(l,"search",e);S.addQuery=(l,e,t)=>t instanceof Array?`${l}.${e}(${t.map(n=>S.parseValues(n)).join(",")})`:`${l}.${e}(${S.parseValues(t)})`;S.parseValues=l=>typeof l=="string"||l instanceof String?`"${l}"`:`${l}`;class p extends Error{constructor(e,t=0,n="",i=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=n,this.response=i}}class le{constructor(){this.config={endpoint:"https://HOSTNAME/v1",endpointRealtime:"",project:"",jwt:"",locale:""},this.headers={"x-sdk-version":"appwrite:web:9.0.1","X-Appwrite-Response-Format":"0.15.0"},this.realtime={socket:void 0,timeout:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window==null?void 0:window.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createSocket:()=>{var e,t;if(this.realtime.channels.size<1)return;const n=new URLSearchParams;n.set("project",this.config.project),this.realtime.channels.forEach(s=>{n.append("channels[]",s)});const i=this.config.endpointRealtime+"/realtime?"+n.toString();(i!==this.realtime.url||!this.realtime.socket||((e=this.realtime.socket)===null||e===void 0?void 0:e.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((t=this.realtime.socket)===null||t===void 0?void 0:t.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=i,this.realtime.socket=new WebSocket(i),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",s=>{this.realtime.reconnectAttempts=0}),this.realtime.socket.addEventListener("close",s=>{var r,c,d;if(!this.realtime.reconnect||((c=(r=this.realtime)===null||r===void 0?void 0:r.lastMessage)===null||c===void 0?void 0:c.type)==="error"&&((d=this.realtime)===null||d===void 0?void 0:d.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}const f=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${f/1e3} seconds.`,s.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},f)}))},onMessage:e=>{var t,n;try{const i=JSON.parse(e.data);switch(this.realtime.lastMessage=i,i.type){case"connected":const s=JSON.parse((t=window.localStorage.getItem("cookieFallback"))!==null&&t!==void 0?t:"{}"),r=s==null?void 0:s[`a_session_${this.config.project}`],c=i.data;r&&!c.user&&((n=this.realtime.socket)===null||n===void 0||n.send(JSON.stringify({type:"authentication",data:{session:r}})));break;case"event":let d=i.data;if(d!=null&&d.channels){if(!d.channels.some(h=>this.realtime.channels.has(h)))return;this.realtime.subscriptions.forEach(h=>{d.channels.some(C=>h.channels.includes(C))&&setTimeout(()=>h.callback(d))})}break;case"error":throw i.data;default:break}}catch(i){console.error(i)}},cleanUp:e=>{this.realtime.channels.forEach(t=>{e.includes(t)&&(Array.from(this.realtime.subscriptions).some(([i,s])=>s.channels.includes(t))||this.realtime.channels.delete(t))})}}}setEndpoint(e){return this.config.endpoint=e,this.config.endpointRealtime=this.config.endpointRealtime||this.config.endpoint.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}subscribe(e,t){let n=typeof e=="string"?[e]:e;n.forEach(s=>this.realtime.channels.add(s));const i=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(i,{channels:n,callback:t}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(i),this.realtime.cleanUp(n),this.realtime.connect()}}call(e,t,n={},i={}){var s,r;return w(this,void 0,void 0,function*(){e=e.toUpperCase(),n=Object.assign({},this.headers,n);let c={method:e,headers:n,credentials:"include"};if(typeof window<"u"&&window.localStorage&&(n["X-Fallback-Cookies"]=(s=window.localStorage.getItem("cookieFallback"))!==null&&s!==void 0?s:""),e==="GET")for(const[d,f]of Object.entries(yt.flatten(i)))t.searchParams.append(d,f);else switch(n["content-type"]){case"application/json":c.body=JSON.stringify(i);break;case"multipart/form-data":let d=new FormData;for(const f in i)Array.isArray(i[f])?i[f].forEach(h=>{d.append(f+"[]",h)}):d.append(f,i[f]);c.body=d,delete n["content-type"];break}try{let d=null;const f=yield kt.exports.fetch(t.toString(),c);if(!((r=f.headers.get("content-type"))===null||r===void 0)&&r.includes("application/json")?d=yield f.json():d={message:yield f.text()},400<=f.status)throw new p(d==null?void 0:d.message,f.status,d==null?void 0:d.type,d);const h=f.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&h&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",h)),d}catch(d){throw d instanceof p?d:new p(d.message)}})}}class ce extends yt{get(){return w(this,void 0,void 0,function*(){let e="/account",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)})}create(e,t,n,i){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "email"');if(typeof n>"u")throw new p('Missing required parameter: "password"');let s="/account",r={};typeof e<"u"&&(r.userId=e),typeof t<"u"&&(r.email=t),typeof n<"u"&&(r.password=n),typeof i<"u"&&(r.name=i);const c=new URL(this.client.config.endpoint+s);return yield this.client.call("post",c,{"content-type":"application/json"},r)})}updateEmail(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "email"');if(typeof t>"u")throw new p('Missing required parameter: "password"');let n="/account/email",i={};typeof e<"u"&&(i.email=e),typeof t<"u"&&(i.password=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",s,{"content-type":"application/json"},i)})}createJWT(){return w(this,void 0,void 0,function*(){let e="/account/jwt",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)})}getLogs(e,t){return w(this,void 0,void 0,function*(){let n="/account/logs",i={};typeof e<"u"&&(i.limit=e),typeof t<"u"&&(i.offset=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("get",s,{"content-type":"application/json"},i)})}updateName(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "name"');let t="/account/name",n={};typeof e<"u"&&(n.name=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}updatePassword(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "password"');let n="/account/password",i={};typeof e<"u"&&(i.password=e),typeof t<"u"&&(i.oldPassword=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",s,{"content-type":"application/json"},i)})}updatePhone(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "number"');if(typeof t>"u")throw new p('Missing required parameter: "password"');let n="/account/phone",i={};typeof e<"u"&&(i.number=e),typeof t<"u"&&(i.password=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",s,{"content-type":"application/json"},i)})}getPrefs(){return w(this,void 0,void 0,function*(){let e="/account/prefs",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)})}updatePrefs(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "prefs"');let t="/account/prefs",n={};typeof e<"u"&&(n.prefs=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}createRecovery(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "email"');if(typeof t>"u")throw new p('Missing required parameter: "url"');let n="/account/recovery",i={};typeof e<"u"&&(i.email=e),typeof t<"u"&&(i.url=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("post",s,{"content-type":"application/json"},i)})}updateRecovery(e,t,n,i){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "secret"');if(typeof n>"u")throw new p('Missing required parameter: "password"');if(typeof i>"u")throw new p('Missing required parameter: "passwordAgain"');let s="/account/recovery",r={};typeof e<"u"&&(r.userId=e),typeof t<"u"&&(r.secret=t),typeof n<"u"&&(r.password=n),typeof i<"u"&&(r.passwordAgain=i);const c=new URL(this.client.config.endpoint+s);return yield this.client.call("put",c,{"content-type":"application/json"},r)})}getSessions(){return w(this,void 0,void 0,function*(){let e="/account/sessions",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("get",n,{"content-type":"application/json"},t)})}deleteSessions(){return w(this,void 0,void 0,function*(){let e="/account/sessions",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("delete",n,{"content-type":"application/json"},t)})}createAnonymousSession(){return w(this,void 0,void 0,function*(){let e="/account/sessions/anonymous",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)})}createEmailSession(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "email"');if(typeof t>"u")throw new p('Missing required parameter: "password"');let n="/account/sessions/email",i={};typeof e<"u"&&(i.email=e),typeof t<"u"&&(i.password=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("post",s,{"content-type":"application/json"},i)})}createMagicURLSession(e,t,n){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "email"');let i="/account/sessions/magic-url",s={};typeof e<"u"&&(s.userId=e),typeof t<"u"&&(s.email=t),typeof n<"u"&&(s.url=n);const r=new URL(this.client.config.endpoint+i);return yield this.client.call("post",r,{"content-type":"application/json"},s)})}updateMagicURLSession(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "secret"');let n="/account/sessions/magic-url",i={};typeof e<"u"&&(i.userId=e),typeof t<"u"&&(i.secret=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("put",s,{"content-type":"application/json"},i)})}createOAuth2Session(e,t,n,i){if(typeof e>"u")throw new p('Missing required parameter: "provider"');let s="/account/sessions/oauth2/{provider}".replace("{provider}",e),r={};typeof t<"u"&&(r.success=t),typeof n<"u"&&(r.failure=n),typeof i<"u"&&(r.scopes=i);const c=new URL(this.client.config.endpoint+s);r.project=this.client.config.project;for(const[d,f]of Object.entries(yt.flatten(r)))c.searchParams.append(d,f);if(typeof window<"u"&&(window==null?void 0:window.location))window.location.href=c.toString();else return c}createPhoneSession(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "number"');let n="/account/sessions/phone",i={};typeof e<"u"&&(i.userId=e),typeof t<"u"&&(i.number=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("post",s,{"content-type":"application/json"},i)})}updatePhoneSession(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "secret"');let n="/account/sessions/phone",i={};typeof e<"u"&&(i.userId=e),typeof t<"u"&&(i.secret=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("put",s,{"content-type":"application/json"},i)})}getSession(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("get",i,{"content-type":"application/json"},n)})}updateSession(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}deleteSession(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e),n={};const i=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",i,{"content-type":"application/json"},n)})}updateStatus(){return w(this,void 0,void 0,function*(){let e="/account/status",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",n,{"content-type":"application/json"},t)})}createVerification(e){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "url"');let t="/account/verification",n={};typeof e<"u"&&(n.url=e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("post",i,{"content-type":"application/json"},n)})}updateVerification(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "secret"');let n="/account/verification",i={};typeof e<"u"&&(i.userId=e),typeof t<"u"&&(i.secret=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("put",s,{"content-type":"application/json"},i)})}createPhoneVerification(){return w(this,void 0,void 0,function*(){let e="/account/verification/phone",t={};const n=new URL(this.client.config.endpoint+e);return yield this.client.call("post",n,{"content-type":"application/json"},t)})}updatePhoneVerification(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "userId"');if(typeof t>"u")throw new p('Missing required parameter: "secret"');let n="/account/verification/phone",i={};typeof e<"u"&&(i.userId=e),typeof t<"u"&&(i.secret=t);const s=new URL(this.client.config.endpoint+n);return yield this.client.call("put",s,{"content-type":"application/json"},i)})}}class ue extends yt{constructor(e,t){super(e),this.databaseId=t}setDatabaseId(e){this.databaseId=e}getDatabaseId(){return this.databaseId}listDocuments(e,t,n,i,s,r,c,d){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "collectionId"');let f="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",this.databaseId).replace("{collectionId}",e),h={};typeof t<"u"&&(h.queries=t),typeof n<"u"&&(h.limit=n),typeof i<"u"&&(h.offset=i),typeof s<"u"&&(h.cursor=s),typeof r<"u"&&(h.cursorDirection=r),typeof c<"u"&&(h.orderAttributes=c),typeof d<"u"&&(h.orderTypes=d);const C=new URL(this.client.config.endpoint+f);return yield this.client.call("get",C,{"content-type":"application/json"},h)})}createDocument(e,t,n,i,s){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "collectionId"');if(typeof t>"u")throw new p('Missing required parameter: "documentId"');if(typeof n>"u")throw new p('Missing required parameter: "data"');let r="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",this.databaseId).replace("{collectionId}",e),c={};typeof t<"u"&&(c.documentId=t),typeof n<"u"&&(c.data=n),typeof i<"u"&&(c.read=i),typeof s<"u"&&(c.write=s);const d=new URL(this.client.config.endpoint+r);return yield this.client.call("post",d,{"content-type":"application/json"},c)})}getDocument(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "collectionId"');if(typeof t>"u")throw new p('Missing required parameter: "documentId"');let n="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",t),i={};const s=new URL(this.client.config.endpoint+n);return yield this.client.call("get",s,{"content-type":"application/json"},i)})}updateDocument(e,t,n,i,s){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "collectionId"');if(typeof t>"u")throw new p('Missing required parameter: "documentId"');let r="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",t),c={};typeof n<"u"&&(c.data=n),typeof i<"u"&&(c.read=i),typeof s<"u"&&(c.write=s);const d=new URL(this.client.config.endpoint+r);return yield this.client.call("patch",d,{"content-type":"application/json"},c)})}deleteDocument(e,t){return w(this,void 0,void 0,function*(){if(typeof e>"u")throw new p('Missing required parameter: "collectionId"');if(typeof t>"u")throw new p('Missing required parameter: "documentId"');let n="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",t),i={};const s=new URL(this.client.config.endpoint+n);return yield this.client.call("delete",s,{"content-type":"application/json"},i)})}}class de{constructor(e){o(this,"account");this.account=new ce(e)}async createNewAccount(e,t,n){return this.account.create("unique()",e,t,n)}async createNewAccountSession(e,t){return this.account.createEmailSession(e,t)}async getAccountSession(e){return this.account.getSession(e)}async getAccountData(){return this.account.get()}async updateAccountName(e){return this.account.updateName(e)}async updateAccountPassword(e,t){return this.account.updatePassword(e,t)}createPasswordRecovery(e){const t="https://econotes.software-engineering.education/";return this.account.createRecovery(e,t)}confirmPasswordRecovery(e,t,n){return this.account.updateRecovery(e,t,n,n)}async updateAccountEmail(e,t){return this.account.updateEmail(e,t)}async deleteAccountSession(e){return this.account.deleteSession(e)}}const he=100;class pe{constructor(e,t){o(this,"database");this.database=new ue(e,t)}async createNewDocument(e,t){return this.database.createDocument(e,"unique()",t)}async listDocuments(e,t,n){return this.database.listDocuments(e,t,he,0,n)}async getDocument(e,t){return this.database.getDocument(e,t)}async updateDocument(e,t,n){return this.database.updateDocument(e,t,n)}async deleteDocument(e,t){return this.database.deleteDocument(e,t)}}class m{static async init(){this.client=new le,this.client.setEndpoint(D.ENDPOINT),this.client.setProject(D.PROJECT_ID),this.accountManager=new de(this.client),this.databaseManager=new pe(this.client,D.DATABASE_ID)}static connectSession(e){this.sessionId=e.$id,this.userId=e.userId,localStorage.setItem("sessionId",this.sessionId),localStorage.setItem("userId",this.userId)}static async disconnectCurrentSession(){await this.removeSession(this.sessionId),this.userId="",this.sessionId="",localStorage.removeItem("sessionId"),localStorage.removeItem("userId")}static async getSession(e){return this.accountManager.getAccountSession(e)}static async createNewSession(e,t){return await this.accountManager.createNewAccountSession(e,t)}static async removeSession(e){return this.accountManager.deleteAccountSession(e)}static async getUserData(){return this.accountManager.getAccountData()}static async updateUsername(e){return this.accountManager.updateAccountName(e)}static async updateUserPassword(e,t){return this.accountManager.updateAccountPassword(e,t)}static async createPasswordRecovery(e){return this.accountManager.createPasswordRecovery(e)}static async confirmPasswordRecovery(e,t,n){return this.accountManager.confirmPasswordRecovery(e,t,n)}static async updateUserEmail(e,t){return this.accountManager.updateAccountEmail(e,t)}static async createAccount(e,t,n){return this.accountManager.createNewAccount(e,t,n)}static async getUserSettingsDocument(){return(await this.databaseManager.listDocuments(D.COLLECTION_SETTINGS,[S.equal("userID",this.userId)])).documents[0]}static async createNewSettingsDocument(e){return this.databaseManager.createNewDocument(D.COLLECTION_SETTINGS,{userID:this.userId,template:e})}static async updateUserSettingsDocument(e){const t=await this.getUserSettingsDocument();this.databaseManager.updateDocument(D.COLLECTION_SETTINGS,t.$id,{template:e})}static async getNoteDocument(e){return(await this.databaseManager.listDocuments(D.COLLECTION_NOTES,[S.equal("userID",this.userId),S.equal("day",e)])).documents[0]}static async getNoteDocumentList(){const e=[],t=await this.databaseManager.listDocuments(D.COLLECTION_NOTES,[S.equal("userID",this.userId)]),n=t.total;if(n!==0){let i=t.documents[t.documents.length-1].$id;for(t.documents.forEach(s=>e.push(s));e.length<n;){const s=await this.databaseManager.listDocuments(D.COLLECTION_NOTES,[S.equal("userID",this.userId)],i);i=s.documents[s.documents.length-1].$id,s.documents.forEach(r=>e.push(r))}}return e}static async getBlockContentDocumentList(e){return await this.databaseManager.listDocuments(D.COLLECTION_BLOCK_CONTENTS,[S.equal("noteID",e)])}static async getGeneratedTitle(e){return await fetch("https://gpt-title.deno.dev/",{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",body:JSON.stringify({blockContents:e})}).then(s=>s.json()).then(s=>s)}static async createNewNoteDocument(e){return this.databaseManager.createNewDocument(D.COLLECTION_NOTES,{userID:this.userId,day:e})}static async createNewBlockContentDocument(e,t){return this.databaseManager.createNewDocument(D.COLLECTION_BLOCK_CONTENTS,{noteID:e,title:t.title,inputType:t.inputType,inputValue:t.inputValue})}static async updateBlockContentDocument(e,t){return this.databaseManager.updateDocument(D.COLLECTION_BLOCK_CONTENTS,e,t)}static async deleteNoteDocument(e){this.databaseManager.deleteDocument(D.COLLECTION_NOTES,e)}static async deleteBlockContents(e){(await this.getBlockContentDocumentList(e)).documents.forEach(n=>{this.databaseManager.deleteDocument(D.COLLECTION_BLOCK_CONTENTS,n.$id)})}}o(m,"client"),o(m,"accountManager"),o(m,"databaseManager"),o(m,"userId"),o(m,"sessionId");class fe extends St{constructor(t){super();o(this,"topics");this.topics=t}}const me=[{name:"Environment",items:[{title:"Things I did to help the environment today:",inputType:"bullet-point-input-field"},{title:"Today, I am planning to cook:",inputType:"checkbox-input-field"},{title:"Car driving log:",inputType:"bullet-point-input-field"}]},{name:"Reflection",items:[{title:"What did you learn today?",inputType:"bullet-point-input-field"},{title:"What did you do today?",inputType:"bullet-point-input-field"},{title:"Last night, after work, I...",inputType:"free-text-input-field"}]},{name:"Planning",items:[{title:"TODOs for today:",inputType:"checkbox-input-field"},{title:"Goals for today:",inputType:"checkbox-input-field"},{title:"If today was the ideal day, what would it look like?",inputType:"free-text-input-field"}]},{name:"Creativity",items:[{title:"What did you discover today?",inputType:"bullet-point-input-field"},{title:"What did you create today?",inputType:"bullet-point-input-field"},{title:"Write a little poem:",inputType:"free-text-input-field"}]},{name:"Feelings",items:[{title:"Today, I was dreaming about...",inputType:"free-text-input-field"},{title:"Today, I was feeling...",inputType:"free-text-input-field"},{title:"Mood log:",inputType:"bullet-point-input-field"}]}],Rt=3;class A{static async init(){await m.init()}static async signInViaMail(e,t){return await m.createNewSession(e,t).then(n=>{m.connectSession(n)}).catch().then(()=>!1),!0}static async signUp(e,t,n){await m.createAccount(e,t,n),await this.signInViaMail(e,t)&&await m.createNewSettingsDocument([])}static async connectToSession(e){const t=await m.getSession(e);return this.convertNumberToDate(t.expire)>new Date?(await m.connectSession(t),!0):!1}static async checkIfUserLoggedIn(){const e=localStorage.getItem("sessionId");let t=!1;return e&&(t=await this.connectToSession(e)),t}static async signOut(){await m.disconnectCurrentSession()}static async getAccountData(){const e=await m.getUserData();return{name:e.name,email:e.email,emailVerification:e.emailVerification,registrationDate:this.convertNumberToDate(e.registration),lastUpdate:this.convertNumberToDate(e.$updatedAt)}}static async updateUsername(e){return m.updateUsername(e)}static async updateEmail(e,t){return m.updateUserEmail(e,t)}static async updatePassword(e,t){return m.updateUserPassword(e,t)}static async sendPasswordRecoveryLink(e){return m.createPasswordRecovery(e)}static async recoverPassword(e,t,n){return m.confirmPasswordRecovery(e,t,n)}static async getCalendarModel(){const e={};return(await m.getNoteDocumentList()).forEach(n=>{const i=new Date(n.day),s=i.getFullYear()+"",r=i.getMonth()+1+"",c=i.getDate()+"";s in e||(e[s]={}),r in e[s]||(e[s][r]=[]),e[s][r].push(c)}),new ae(new Date,e)}static async getEditorModel(e){try{const t=await m.getNoteDocument(this.convertDateToString(e)),n=await m.getBlockContentDocumentList(t.$id),i=this.convertArrayToBlockContent(n.documents);if(this.dayIsToday(e)&&i.length===Rt){const s=await this.getGPT3BlockContentDocument(t.$id);s!==null&&i.push(s)}return new Bt(e,i)}catch{const n=await this.createEditorModelFromTemplate();return await this.createEditorModel(n)}}static async createEditorModel(e){const t=await m.createNewNoteDocument(this.convertDateToString(e.day));return e.blockContents.forEach(async n=>{const i=await m.createNewBlockContentDocument(t.$id,n);n.documentId=i.$id}),e}static async updateEditorModel(e){e.blockContents.forEach(t=>{m.updateBlockContentDocument(t.documentId,{title:t.title,inputType:t.inputType,inputValue:t.inputValue})})}static async createEditorModelFromTemplate(){const e=await A.getUserSettingsModel(),t=await this.getGPT3BlockContent(),n=this.convertArrayToBlockContent(e.settings.template);return t!==void 0&&n.push(t),new Bt(new Date,n)}static async deleteEditorModel(e){const t=await m.getNoteDocument(this.convertDateToString(e.day));return await m.deleteNoteDocument(t.$id),await m.deleteBlockContents(t.$id)}static async getGPT3BlockContentDocument(e){const t=await this.getGPT3BlockContent();if(t!==null){const n=await m.createNewBlockContentDocument(e,t);t.documentId=n.$id}return t}static async getGPT3BlockContent(){const e=await this.getGPT3BlockContentParameter();return e.length>=3?{title:(await m.getGeneratedTitle(e)).gptTitle,inputType:at.FreeText,inputValue:"",documentId:""}:null}static async getGPT3BlockContentParameter(){const e=[],t=await this.getLastNotes();for(let n=0;n<t.length;n++)(await m.getBlockContentDocumentList(t[n].$id)).documents.forEach(s=>e.push(s));return e}static async getLastNotes(){return(await m.getNoteDocumentList()).filter(i=>i.day!==this.convertDateToString(new Date)).sort((i,s)=>new Date(i.day)<new Date(s.day)?1:-1).slice(0,Rt)}static async getUserSettingsModel(){const e=await m.getUserData(),t=await m.getUserSettingsDocument(),n=t.template,i=this.jsonParseArray(n);return new re(e.name,{template:i})}static async updateUserSettingsModel(e){return await m.updateUsername(e.username),await m.updateUserSettingsDocument(this.stringifyArray(e.settings.template))}static async createUserSettingsModel(e){return await m.createNewSettingsDocument(e.settings.template)}static async getTemplateConfigurationModel(){return new fe(me.map(t=>t))}static getDarkMode(){const e=localStorage.getItem("darkMode");if(e===null){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;return localStorage.setItem("darkMode",t.toString()),t}return e==="true"}static setDarkMode(e){localStorage.setItem("darkMode",e.toString())}static dayIsToday(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}static convertArrayToBlockContent(e){const t=[];return e.forEach(n=>{t.push({title:n.title,inputType:n.inputType,inputValue:n.inputValue,documentId:n.$id})}),t}static convertNumberToDate(e){return new Date(e*1e3)}static jsonParseArray(e){const t=[];return e.forEach(n=>t.push(JSON.parse(n))),t}static stringifyArray(e){const t=[];return e.forEach(n=>t.push(JSON.stringify(n))),t}static convertDateToString(e){return[e.getFullYear(),e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,e.getDate()<10?"0"+e.getDate():e.getDate()].join("-")}static async deleteUserNotes(){(await m.getNoteDocumentList()).forEach(async t=>{await m.deleteBlockContents(t.$id),await m.deleteNoteDocument(t.$id)})}static async deleteUserSettings(){return await m.updateUserSettingsDocument(this.stringifyArray([]))}}const jt=(...l)=>{},_t=class extends HTMLElement{constructor(t,n){super();o(this,"html");o(this,"css");o(this,"webComponentId");this.setId(),this.html=t!=null?t:"",this.css=n!=null?n:""}onDestroy(){}notifyAll(t,n){const i=new CustomEvent(t,{detail:n});this.dispatchEvent(i)}select(t){return this.querySelector(t)}selectAll(t){return this.querySelectorAll(t)}async connectedCallback(){this.loadStylesheet(),this.loadHtml();const t=this.onCreate();t instanceof Promise&&await t}async disconnectedCallback(){this.onDestroy()}loadStylesheet(){if(this.css!==""){const t=document.createElement("style");t.innerHTML=this.css,this.appendChild(t)}}loadHtml(){if(this.html!==""){const t=document.createElement("template");t.innerHTML=this.html,this.appendChild(t.content.cloneNode(!0)),this.classList.add("web-component")}}setId(){_t.totalWebComponents++,this.webComponentId=_t.totalWebComponents,Object.freeze(this.webComponentId)}getWebComponentId(){return this.webComponentId}};let k=_t;o(k,"totalWebComponents",0);const ge=`<div class="logo" xmlns="http://www.w3.org/1999/html">
  <svg>
    <image xlink:href="https://i.imgur.com/6E0t6HW.png" />
  </svg>
</div>
<div class="login-form">
  <input type="text" placeholder="Username" class="username" >
  <input type="text" placeholder="Email" class="email">
  <input type="password" placeholder="Password" class="password">
  <input type="password" placeholder="Verify Password" class="retype-password">
  <button>Login</button>
</div>
<div class="span-elements">
  <div class="left-block">
    <span class="forgot-password">Forgot password?</span>
  </div>
  <div class="right-block">
    <span class="register-toggle">Sign up</span>
  </div>
</div>
`,ye=`login-register{display:flex;flex-grow:1;margin-right:auto;margin-left:auto}div{display:flex;flex-direction:column}.logo{margin-top:auto}.logo>svg>image{width:100%;height:100%}.login-form button,input{border-radius:10px;margin-top:var(--spacing-small);background-color:var(--background-focus)}button:hover{background-color:var(--text-accent)}.login-form .retype-password,.username{visibility:hidden}.span-elements{flex-direction:row;margin-bottom:auto;cursor:pointer}.span-elements>div{font-size:80%;margin-top:var(--spacing-small);flex-grow:1}.left-block{text-align:left;flex-direction:column}.right-block{flex-direction:column}.forgot-password{color:var(--text-accent);cursor:pointer}.forgot-password:hover{color:var(--text-accent-hover)}.register-toggle{text-align:right;border-radius:10px}.register-toggle:hover{color:var(--text-accent)}
`,ve=`custom-toast{position:absolute;bottom:1em;left:0;right:0;z-index:1000;width:20em;border-radius:15px;border-color:var(--border-color);border-style:solid;border-width:2px;display:inline-block;align-content:center;margin-left:auto;margin-right:auto;padding:1em;font-size:var(--font-size-medium);text-align:center;line-height:1.3em;box-shadow:0 0 10px #0003}custom-toast.warning{background-color:var(--warning-color)}custom-toast.error{background-color:var(--error-color)}custom-toast.success{background-color:var(--success-color)}custom-toast.info{background-color:var(--info-color)}
`;var N=(l=>(l.Info="info",l.Success="success",l.Warning="warning",l.Error="error",l))(N||{}),Z=(l=>(l[l.Short=2e3]="Short",l[l.Medium=5e3]="Medium",l[l.Long=1e4]="Long",l))(Z||{});class Ut extends k{constructor(t,n,i){super(void 0,ve);o(this,"message");o(this,"type");o(this,"duration");o(this,"$close",()=>{this.classList.remove("slide-up-in"),this.classList.add("slide-down-out"),setTimeout(()=>this.remove(),300)});this.message=t,this.type=n,this.duration=i}get htmlTagName(){return"custom-toast"}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){this.classList.add(this.type),this.classList.add("slide-up-in"),this.innerHTML=this.message}initListener(){this.addEventListener("click",()=>this.$close()),setTimeout(this.$close,this.duration)}}const we=Object.freeze(Object.defineProperty({__proto__:null,ToastType:N,ToastDuration:Z,default:Ut},Symbol.toStringTag,{value:"Module"}));class rt{constructor(){o(this,"type",N.Info);o(this,"duration",Z.Short);o(this,"message","")}setType(e){return this.type=e,this}setMessage(e){return this.message=e,this}setDuration(e){return this.duration=e,this}show(){const e=new Ut(this.message,this.type,this.duration);document.body.appendChild(e)}}const be=Object.freeze(Object.defineProperty({__proto__:null,ToastFactory:rt},Symbol.toStringTag,{value:"Module"}));class Ht extends k{constructor(){super(ge,ye);o(this,"$loginForm");o(this,"$loginButton");o(this,"$emailInput");o(this,"$usernameInput");o(this,"$passwordInput");o(this,"$verifyPasswordInput");o(this,"$registerToggle");o(this,"$forgotPassword");o(this,"loginState",new M(!0));o(this,"usernameInputHTML");o(this,"passwordInputHTML");o(this,"verifyPasswordInputHTML");o(this,"changeRegisterMode",()=>{new URLSearchParams(window.location.search).get("userId")!==null?(this.$loginButton.innerText="set new password",this.$registerToggle.classList.add("remove"),this.$usernameInput.remove(),this.$emailInput.remove(),this.$registerToggle.style.visibility="hidden",this.$forgotPassword.style.visibility="hidden",this.$verifyPasswordInput.style.visibility="visible"):this.loginState.value?(this.$loginButton.innerText="Login",this.$registerToggle.innerText="Sign Up",this.$verifyPasswordInput.classList.add("remove"),this.$usernameInput.classList.add("remove"),this.$forgotPassword.style.visibility="visible",setTimeout(()=>{this.$verifyPasswordInput.remove(),this.$usernameInput.remove()},63),this.loginState.value=!1):(this.$loginButton.innerText="Register",this.$registerToggle.innerText="Sign In",this.$forgotPassword.style.visibility="hidden",this.createRegisterInputEl(),this.loginState.value=!0)});o(this,"togglePasswordForgot",()=>{this.$forgotPassword.innerText==="go back"?(this.$forgotPassword.innerText="Forgot Password?",this.loginState.value=!0,this.$registerToggle.style.visibility="visible",this.addPasswordInputField(),this.changeRegisterMode()):(this.$loginButton.innerText="reset password",this.$passwordInput.remove(),this.$registerToggle.style.visibility="hidden",this.$forgotPassword.innerText="go back")});o(this,"addPasswordInputField",()=>{const t=document.createElement("div");t.innerHTML=this.passwordInputHTML,this.$loginForm.insertBefore(t.childNodes[0],this.$loginForm.children[1]),this.$passwordInput=this.select(".password"),this.$passwordInput.style.visibility="visible"});o(this,"readInput",async()=>{this.$loginButton.innerText==="set new password"?this.checkPassword()&&this.recoverPassword():this.$loginButton.innerText==="reset password"?this.sendPasswordRecoveryLink():this.loginState.value?this.checkPassword()&&this.signUp():this.signIn()});o(this,"recoverPassword",async()=>{const t=new URLSearchParams(window.location.search),n=t.get("userId"),i=t.get("secret");try{await A.recoverPassword(n,i,this.$passwordInput.value)}catch(s){if(s instanceof Error){this.sendToast(s.message,N.Error);return}window.location.href=window.location.origin}});o(this,"sendPasswordRecoveryLink",async()=>{try{await A.sendPasswordRecoveryLink(this.$emailInput.value),this.sendToast("An Email has been send!",N.Info);return}catch(t){t instanceof Error&&this.sendToast(t.message,N.Error);return}});o(this,"signUp",async()=>{try{await A.signUp(this.$emailInput.value,this.$passwordInput.value,this.$usernameInput.value)}catch(t){t instanceof Error&&this.sendToast(t.message,N.Error);return}window.location.reload()});o(this,"signIn",async()=>{let t=!1;try{t=await A.signInViaMail(this.$emailInput.value,this.$passwordInput.value)}catch(n){n instanceof Error&&this.sendToast(n.message,N.Error);return}t&&window.location.reload()})}get htmlTagName(){return"login-register"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.$loginForm=this.select(".login-form"),this.$loginButton=this.select("button"),this.$emailInput=this.select(".email"),this.$passwordInput=this.select(".password"),this.$verifyPasswordInput=this.select(".retype-password"),this.$usernameInput=this.select(".username"),this.$registerToggle=this.select(".register-toggle"),this.$forgotPassword=this.select(".forgot-password"),this.usernameInputHTML=this.$usernameInput.outerHTML,this.passwordInputHTML=this.$passwordInput.outerHTML,this.verifyPasswordInputHTML=this.$verifyPasswordInput.outerHTML,this.changeRegisterMode()}initListeners(){this.$registerToggle.addEventListener("click",this.changeRegisterMode),this.$forgotPassword.addEventListener("click",this.togglePasswordForgot),this.$loginButton.addEventListener("click",this.readInput)}createRegisterInputEl(){const t=document.createElement("div");t.innerHTML=(this.usernameInputHTML+`
`+this.verifyPasswordInputHTML).trim(),this.$loginForm.insertBefore(t.childNodes[0],this.$loginForm.children[0]),this.$loginForm.insertBefore(t.childNodes[1],this.$loginForm.children[3]),this.$verifyPasswordInput=this.select(".retype-password"),this.$usernameInput=this.select(".username"),this.$verifyPasswordInput.style.visibility="visible",this.$usernameInput.style.visibility="visible"}checkPassword(){return this.$passwordInput.value!==this.$verifyPasswordInput.value?(this.sendToast("The passwords do not match",N.Error),!1):!0}sendToast(t,n){new rt().setMessage(t).setType(n).setDuration(Z.Medium).show()}}const Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Ce=`<span id="template-configurator-title" class="title-l">
  \u{1F4DD} Template Configuration
</span>
<div class="container" id="topic-configurator-container">
  <!-- TopicConfigurator will be appended here -->
</div>
<div class="container" id="input-type-configurator-container" hidden>
  <!-- InputTypeConfigurator will be appended here -->
</div>`,Ee=`template-configurator{display:flex;flex-direction:column;justify-content:space-between;align-items:center;overflow:hidden}template-configurator>.container{width:100%}.button-navbar{display:flex;flex-direction:row;width:100%;padding:0 var(--spacing-medium) var(--spacing-medium);margin-bottom:auto}.button-navbar>.next-button{margin-left:auto;align-self:flex-end}topic-configurator-item,input-type-configurator-item{margin-bottom:var(--spacing-large);flex-grow:0!important;margin-right:auto;overflow:hidden}.configuration-title{margin-bottom:var(--spacing-large)}topic-configurator{display:flex;flex-direction:column;align-items:center;overflow:hidden}topic-configurator>.content,input-type-configurator>.content{align-items:center;align-content:center;width:100%;overflow-y:scroll}topic-configurator>.container,input-type-configurator>.container{align-items:center}#topic-configurator-container{overflow:hidden}.topic-title-selection-container>div{flex-direction:row}
`,_e=`<div class="content container">
  <span class="title-m configuration-title" id="topic-configurator-info-title">
  Please choose up to <span class="max-topics-count">3</span> questions for your tempalte:
</span>
  <div id="topic-configurator-items-container" class="container">
    <!-- TopicConfigurations will be appended here -->
  </div>
</div>
<div class="button-navbar" id="topic-configurator-nav-buttons">
  <button class="next-button" id="topic-configurator-next-button"></button>
</div>`,Ie="",Se=`<form class="topic-title-selection-form">
    <span class="topic-name title-s"></span>
    <div class="topic-title-selection-container container">
        <!-- Topic title radio inputs will be appended here -->
    </div>
</form>`;class Ft extends k{constructor(t,n){super(Se);o(this,"topic");o(this,"selectedTemplateItems");o(this,"$topicTitleSelectionContainer");o(this,"$topicName");o(this,"$updateCheckboxes",()=>{this.$topicTitleSelectionContainer.querySelectorAll("input[type=checkbox]").forEach(n=>{n.checked=this.selectedTemplateItems.value.find(i=>i.title===n.value)!==void 0})});o(this,"$onClickCheckbox",(t,n)=>{n?this.selectedTemplateItems.value.push(t):this.selectedTemplateItems.value=this.selectedTemplateItems.value.filter(i=>i.title!==t.title)});this.topic=t,this.selectedTemplateItems=n}get htmlTagName(){return"topic-configurator-item"}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){this.$topicTitleSelectionContainer=this.select(".topic-title-selection-container"),this.$topicName=this.select(".topic-name"),this.$topicName.innerHTML=this.topic.name,this.$appendTopicItems()}initListener(){this.selectedTemplateItems.addEventListener("change",this.$updateCheckboxes)}$appendTopicItems(){this.topic.items.forEach(t=>{const n=document.createElement("input"),i=document.createElement("label"),s=document.createElement("div");n.type="checkbox",n.name="topic-title",n.value=t.title,s.appendChild(n),i.innerHTML=t.title,s.appendChild(i),this.$topicTitleSelectionContainer.appendChild(s),n.addEventListener("change",()=>this.$onClickCheckbox(t,n.checked))}),this.$updateCheckboxes()}}const $e=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),st=class extends k{constructor(t,n){super(_e,Ie);o(this,"templateConfigurationModelState");o(this,"selectedTemplateItems");o(this,"$topicConfigurationItemsContainer");o(this,"$nextButton");o(this,"onSelectedTitlesChanged",()=>{this.selectedTemplateItems.value.length>st.MAX_TOPICS?(this.$nextButton.disabled=!0,this.$nextButton.textContent=`Select at max ${st.MAX_TOPICS} topics`):this.selectedTemplateItems.value.length<st.MIN_TOPICS?(this.$nextButton.disabled=!0,this.$nextButton.textContent=`Select at least ${st.MIN_TOPICS} topics`):(this.$nextButton.disabled=!1,this.$nextButton.textContent="Next")});o(this,"$onNextButtonClicked",()=>{this.notifyAll(st.NEXT_BUTTON_CLICKED_EVENT,{})});this.templateConfigurationModelState=t,this.selectedTemplateItems=n}get htmlTagName(){return"topic-configurator"}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){this.$topicConfigurationItemsContainer=this.select("#topic-configurator-items-container"),this.$nextButton=this.select("#topic-configurator-next-button"),this.$appendTopicConfiguratorItems(),this.onSelectedTitlesChanged()}initListener(){this.$nextButton.addEventListener("click",this.$onNextButtonClicked),this.selectedTemplateItems.addEventListener("change",this.onSelectedTitlesChanged)}$appendTopicConfiguratorItems(){this.templateConfigurationModelState.value.topics.forEach(t=>{const n=new Ft(t,this.selectedTemplateItems);this.$topicConfigurationItemsContainer.appendChild(n)})}};let tt=st;o(tt,"NEXT_BUTTON_CLICKED_EVENT","onFinishTopicConfiguration"),o(tt,"MAX_TOPICS",3),o(tt,"MIN_TOPICS",3);const Le=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),ke=`<div class="content container">
  <span class="title-m configuration-title" id="input-type-configurator-info-title" >
    Please choose the input types for your template:
  </span>
  <div id="input-type-configurator-items-container" class="container">
    <!-- InputTypeConfigurations will be appended here -->
  </div>
</div>
<div class="button-navbar" id="input-type-configurator-nav-buttons">
  <button class="back-button" id="input-type-configurator-back-button">Back</button>
  <button class="next-button" id="input-type-configurator-next-button">Finish</button>
</div>`,Pe=`<span class="topic-title title-s"></span>
<select name="Input Type" class="input-type-configuration-selection">
    <!-- Options will be appended here -->
</select>`,Oe=`input-type-configurator-item{flex-direction:row!important;align-items:center;flex-grow:0!important;margin-bottom:var(--spacing-medium)}.input-type-configuration-selection{margin-left:var(--spacing-medium);margin-right:auto}
`;class qt extends k{constructor(t){super(Pe,Oe);o(this,"$topicTitle");o(this,"$inputTypeSelection");o(this,"templateItem");o(this,"$onSelectionChanged",()=>{this.templateItem.inputType=this.$inputTypeSelection.value});this.templateItem=t}get htmlTagName(){return"input-type-configurator-item"}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){this.$topicTitle=this.select(".topic-title"),this.$topicTitle.innerHTML=this.templateItem.title,this.$inputTypeSelection=this.select(".input-type-configuration-selection"),this.$appendOptions(),this.$inputTypeSelection.value=this.templateItem.inputType}initListener(){this.$inputTypeSelection.addEventListener("change",this.$onSelectionChanged)}$appendOptions(){Object.keys(at).forEach(t=>{const n=document.createElement("option");n.value=at[t],n.innerHTML=t,this.$inputTypeSelection.appendChild(n)})}}const xe=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"})),It=class extends k{constructor(t){super(ke);o(this,"selectedTemplateItems");o(this,"$inputTypeConfigurationElementsContainer");o(this,"$backButton");o(this,"$nextButton");this.selectedTemplateItems=t}get htmlTagName(){return"input-type-configurator"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.$inputTypeConfigurationElementsContainer=this.select("#input-type-configurator-items-container"),this.$backButton=this.select("#input-type-configurator-back-button"),this.$nextButton=this.select("#input-type-configurator-next-button"),this.$appendInputTypeConfigurations()}initListeners(){this.$backButton.addEventListener("click",()=>{this.notifyAll(It.BACK_BUTTON_CLICKED_EVENT)}),this.$nextButton.addEventListener("click",()=>{this.notifyAll(It.NEXT_BUTTON_CLICKED_EVENT)})}$appendInputTypeConfigurations(){this.selectedTemplateItems.value.forEach(t=>{const n=new qt(t);this.$inputTypeConfigurationElementsContainer.appendChild(n)})}refresh(){this.$inputTypeConfigurationElementsContainer.innerHTML="",this.$appendInputTypeConfigurations()}};let et=It;o(et,"NEXT_BUTTON_CLICKED_EVENT","finishInputTypeConfiguration"),o(et,"BACK_BUTTON_CLICKED_EVENT","cancelInputTypeConfiguration");const De=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"})),ut={userSettingsModel:"userSettingsModel",editorModel:"editorModel",calendarModel:"calendarModel"},xt=class extends k{constructor(t){super(Ce,Ee);o(this,"templateConfigurationModelState");o(this,"templateToEditState",new M([]));o(this,"configurationProgressState",new M(0));o(this,"$topicConfiguratorContainer");o(this,"$topicConfigurator");o(this,"$inputTypeConfiguratorContainer");o(this,"$inputTypeConfigurator");o(this,"didSave",!1);o(this,"onModalClose",()=>{this.didSave?this.onSavedAndClose():this.onCancelAndClose(),this.didSave=!1});o(this,"onSavedAndClose",()=>{new rt().setMessage("\u{1F4BE} Your template has been saved").setType(N.Success).setDuration(Z.Short).show()});o(this,"onCancelAndClose",()=>{new rt().setMessage("\u{1F5D1}\uFE0F Your template has not been saved").setType(N.Warning).setDuration(Z.Short).show()});o(this,"$initTopicConfigurator",()=>{this.$topicConfiguratorContainer=this.select("#topic-configurator-container"),this.$topicConfigurator=new tt(this.templateConfigurationModelState,this.templateToEditState),this.$topicConfiguratorContainer.appendChild(this.$topicConfigurator)});o(this,"$initInputTypeConfigurator",()=>{this.$inputTypeConfiguratorContainer=this.select("#input-type-configurator-container"),this.$inputTypeConfigurator=new et(this.templateToEditState),this.$inputTypeConfiguratorContainer.appendChild(this.$inputTypeConfigurator)});o(this,"$onConfigurationProgressChanged",()=>{this.configurationProgressState.value===0?(this.$topicConfiguratorContainer.hidden=!1,this.$inputTypeConfiguratorContainer.hidden=!0):(this.$topicConfiguratorContainer.hidden=!0,this.$inputTypeConfigurator.refresh(),this.$inputTypeConfiguratorContainer.hidden=!1)});o(this,"$onFinishTopicConfiguration",()=>{this.configurationProgressState.value=1});o(this,"$onBackToTopicConfiguration",()=>{this.configurationProgressState.value=0});o(this,"$onFinishInputTypeConfiguration",async()=>{const t=this.templateToEditState.value,n=nt.getStateById(ut.userSettingsModel);if(n){const i=n.value;i.settings.template=t,A.updateUserSettingsModel(i).then(()=>{this.didSave=!0,this.notifyAll(xt.FINISH_TEMPLATE_CONFIGURATION_EVENT,{template:t})})}});t&&(this.templateToEditState.value=t)}get htmlTagName(){return"template-configurator"}onCreate(){return new Promise(async t=>{const n=await A.getTemplateConfigurationModel();this.templateConfigurationModelState=n.toState(),this.$initHtml(),this.$initHtmlListener(),this.initStateListener(),t()})}$initHtml(){this.$initTopicConfigurator(),this.$initInputTypeConfigurator()}$initHtmlListener(){this.$topicConfigurator.addEventListener(tt.NEXT_BUTTON_CLICKED_EVENT,this.$onFinishTopicConfiguration),this.$inputTypeConfigurator.addEventListener(et.BACK_BUTTON_CLICKED_EVENT,this.$onBackToTopicConfiguration),this.$inputTypeConfigurator.addEventListener(et.NEXT_BUTTON_CLICKED_EVENT,this.$onFinishInputTypeConfiguration)}initStateListener(){this.configurationProgressState.addEventListener("change",this.$onConfigurationProgressChanged)}};let lt=xt;o(lt,"FINISH_TEMPLATE_CONFIGURATION_EVENT","do-close");const Me=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),Ne=`<div id="home-container" class="container">
  <home-bar></home-bar>
  <div id="home-container-content" class="container">
    <!-- Calendar & Editor will be appended here -->
    <main-calendar></main-calendar>
    <note-editor></note-editor>
  </div>
</div>
`,Ae=`home-component{flex-grow:1;overflow:hidden}#home-container{overflow:hidden}#home-container-content{display:flex;flex-direction:row;height:100%;overflow:hidden}home-component #template-editor-container{width:40%;height:90%}#template-configurator-background-dimmer{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#00000080}
`;class Be extends Vt{constructor(){super()}}const z=new Be,Re=`<div class="editor border">
  <ul class="editor-blocks-container container">
    <li class="spacer no-list-style"></li>
  </ul>
  <div class="icon settings hover-spin" id="edit-template-icon"></div>
</div>`,Ve=`<div class="editor-block">
  <span class="title title-s underlined"></span>
  <div class="input-field-container"></div>
</div>
`,je=`editor-block{margin-bottom:1em}
`,Ue='<textarea class="text-input editor-atomic-item" placeholder="type here..." maxlength="1000"></textarea>',He=`free-text-input-field>.text-input{min-height:3em;resize:vertical;width:25em}
`,vt="close-all-editor-inputs";class Kt extends k{constructor(t){super(Ue,He);o(this,"inputValueState");o(this,"$textArea");this.inputValueState=t}get htmlTagName(){return"free-text-input-field"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.$textArea=this.select(".text-input"),this.$textArea.value=this.inputValueState.value}initListeners(){this.$textArea.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),this.toggleActive(!1))}),this.$textArea.addEventListener("click",t=>{t.stopPropagation(),this.toggleActive(!0)}),z.addEventListener(vt,t=>{t.data.triggerWebComponentId!==this.getWebComponentId()&&(jt(t,this.getWebComponentId()),this.toggleActive(!1))})}toggleActive(t){t?(this.$textArea.classList.add("active"),z.notifyAll(vt,{triggerWebComponentId:this.getWebComponentId()})):(this.$textArea.classList.remove("active"),this.$textArea.blur(),this.inputValueState.value=this.$textArea.value)}}const Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Kt},Symbol.toStringTag,{value:"Module"})),qe=`<ul class="bullet-point-container">
  <!--LiveBulletPoints will be appended here-->
</ul>
<input type="text" class="new-bullet-point-input text-input new-item-input editor-atomic-item" placeholder="Add a bullet point">
`,Ke=`<div class="live-text-input-container">
  <!-- LiveTextInput will be appended here -->
</div>`,Ge=`<div class="live-text-input-container container">
  <span class="text-preview animate-slide"></span>
  <input type="text" class="text-input animate-slide" placeholder="type here..." maxlength="100" hidden></input>
</div>
`,ze=`.live-text-input-container>.text-input.single-line{resize:none}.live-text-input-container>.text-input.multi-line{width:100%;resize:vertical}.live-text-input-container>.text-preview{flex-grow:1}.live-text-input-container>.live-text-input-container{cursor:pointer}
`;class Pt extends k{constructor(t,n){super(Ge,ze);o(this,"$textPreview");o(this,"$textInput");o(this,"isSingleLine");o(this,"textValueState");o(this,"$setSingleLine",()=>{this.$textInput.setAttribute("rows","1"),this.$textInput.classList.add("single-line"),this.$textInput.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),this.toggleMode(!0))})});o(this,"$setMultiLine",()=>{this.$textInput.classList.add("multi-line")});o(this,"$onCloseAllEditorInputFields",t=>{t.triggerWebComponentId!==this.getWebComponentId()&&this.$textPreview.hidden&&this.toggleMode(!0)});o(this,"toggleMode",t=>{this.$textPreview.hidden=!t,this.$textInput.hidden=t,t?this.showTextPreview():this.showTextInput()});o(this,"showTextPreview",()=>{this.textValueState.value=this.$textInput.value,this.$textPreview.innerText=this.textValueState.value});o(this,"showTextInput",()=>{this.$textInput.value=this.textValueState.value,z.notifyAll(vt,{triggerWebComponentId:this.getWebComponentId()})});this.textValueState=t,this.isSingleLine=n}get htmlTagName(){return"live-text-input"}onCreate(){this.$initHtml(),this.initListeners(),this.isSingleLine?this.$setSingleLine():this.$setMultiLine(),this.toggleMode(!0)}$initHtml(){this.$textPreview=this.select(".text-preview"),this.$textInput=this.select(".text-input"),this.$textPreview.innerText=this.textValueState.value,this.$textInput.value=this.textValueState.value}initListeners(){this.$textPreview.addEventListener("click",t=>{t.stopPropagation(),this.toggleMode(!1)}),this.$textInput.addEventListener("click",t=>{t.stopPropagation()}),z.addEventListener(vt,t=>this.$onCloseAllEditorInputFields(t.data))}}const We=Object.freeze(Object.defineProperty({__proto__:null,default:Pt},Symbol.toStringTag,{value:"Module"}));class Gt extends k{constructor(t){super(Ke);o(this,"$liveTextInputContainer");o(this,"$liveTextInput");o(this,"textValueState");this.textValueState=t}get htmlTagName(){return"live-bullet-point-item"}onCreate(){this.$initHtml()}$initHtml(){this.classList.add("list-item"),this.classList.add("editor-atomic-item"),this.$liveTextInputContainer=this.select(".live-text-input-container"),this.$liveTextInput=new Pt(this.textValueState,!0),this.$liveTextInputContainer.appendChild(this.$liveTextInput)}}const Xe=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"}));class zt extends k{constructor(t){super(qe);o(this,"$bulletPointContainer");o(this,"$newBulletPointInputContainer");o(this,"$newBulletPointInput");o(this,"bulletPointsListState");o(this,"bulletPointsState");o(this,"$appendBulletPoints",()=>{this.bulletPointsState.value.forEach((t,n)=>{this.$bulletPointContainer.insertBefore(this.$createBulletPoint(n),this.$newBulletPointInputContainer)})});o(this,"$createBulletPoint",t=>{const n=new M(this.bulletPointsState.value[t]),i=new Gt(n);return n.addEventListener("change",s=>{s.data.newValue===""&&i.remove(),this.bulletPointsState.value[t]=s.data.newValue}),i});o(this,"onBulletPointsStateChanged",()=>{this.bulletPointsListState.value=this.bulletPointsState.value.filter(t=>t.trim()!=="").join(`
`)});o(this,"$addNewBulletPointItem",()=>{const t=this.$newBulletPointInput.value.trim();t.length>0&&(this.bulletPointsState.value.push(t),this.$bulletPointContainer.insertBefore(this.$createBulletPoint(this.bulletPointsState.value.length-1),this.$newBulletPointInputContainer),this.$newBulletPointInput.value="")});this.bulletPointsListState=t,this.bulletPointsState=new M([]),this.bulletPointsListState.value.split(`
`).forEach(n=>{const i=n.trim();i!==""&&this.bulletPointsState.value.push(i)})}get htmlTagName(){return"bullet-point-input-field"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.$bulletPointContainer=this.select(".bullet-point-container"),this.$newBulletPointInputContainer=this.select(".new-bullet-point-input-container"),this.$newBulletPointInput=this.select(".new-bullet-point-input"),this.$appendBulletPoints()}initListeners(){this.$newBulletPointInput.addEventListener("keydown",t=>{t.key==="Enter"&&this.$addNewBulletPointItem()}),this.bulletPointsState.addEventListener("change",this.onBulletPointsStateChanged)}}const Je=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),Qe=`<div class="check-list-container">
  <!-- LiveCheckListItems will be appended here -->
</div>
<input type="text" class="new-check-list-item-input text-input new-item-input editor-atomic-item" placeholder="Add a check list item">
`,Ye=`<div class="check-list-item-container">
  <input type="checkbox" class="checkbox">
  <!--LiveTextInput will be appended here-->
</div>`,Ze=`.check-list-item-container{width:100%;display:flex;flex-direction:row;align-items:center}.checked{text-decoration:line-through}.checkbox{cursor:pointer}
`;class Wt extends k{constructor(t,n){super(Ye,Ze);o(this,"$checkListItemContainer");o(this,"$checkbox");o(this,"$liveTextInput");o(this,"textValueState");o(this,"isCheckedState");o(this,"initListeners",()=>{this.$checkbox.addEventListener("change",this.$onCheckboxChanged),this.isCheckedState.addEventListener("change",this.onCheckedStateChanged)});o(this,"$onCheckboxChanged",t=>{this.isCheckedState.value=t.target.checked});o(this,"onCheckedStateChanged",()=>{this.isCheckedState.value?this.onToggleChecked():this.onToggleUnchecked()});o(this,"onToggleChecked",()=>{this.$checkListItemContainer.classList.add("checked")});o(this,"onToggleUnchecked",()=>{this.$checkListItemContainer.classList.remove("checked")});this.textValueState=t,this.isCheckedState=n}get htmlTagName(){return"check-list-item"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.classList.add("list-item"),this.classList.add("editor-atomic-item"),this.$checkListItemContainer=this.select(".check-list-item-container"),this.$checkbox=this.select("input"),this.$liveTextInput=new Pt(this.textValueState,!0),this.$checkListItemContainer.appendChild(this.$liveTextInput),this.isCheckedState.value&&(this.$checkbox.checked=this.isCheckedState.value,this.onToggleChecked())}}const tn=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),j=class extends k{constructor(t){super(Qe);o(this,"$checkListContainer");o(this,"$newCheckListItemInputContainer");o(this,"$newCheckListItemInput");o(this,"inputValueState");o(this,"checkListStates");o(this,"$appendCheckListItems",()=>{this.checkListStates.value.forEach((t,n)=>{this.$checkListContainer.insertBefore(this.$createCheckListItem(n),this.$newCheckListItemInputContainer)})});o(this,"$createCheckListItem",t=>{const n=this.checkListStates.value[t],i=n.split(j.CHECK_LIST_CONTENT_SEPARATOR)[0],s=n.split(j.CHECK_LIST_CONTENT_SEPARATOR).splice(1).join(j.CHECK_LIST_CONTENT_SEPARATOR),r=new M(i.trim()===j.CHECK_LIST_IS_CHECKED_MARK),c=new M(s.trim()),d=new Wt(c,r);if(i===void 0||s===void 0)throw new Xt(this.checkListStates.value[t],this.inputValueState.value,i,s);return r.addEventListener("change",()=>{this.onCheckListItemChanged(t,r.value,c.value)}),c.addEventListener("change",()=>{c.value.trim()===""&&d.remove(),this.onCheckListItemChanged(t,r.value,c.value)}),d});o(this,"onBulletPointsStateChanged",()=>{this.inputValueState.value=this.checkListStates.value.filter(t=>t.split(j.CHECK_LIST_CONTENT_SEPARATOR).splice(1).join(j.CHECK_LIST_CONTENT_SEPARATOR).trim()!=="").join(`
`)});o(this,"onCheckListItemChanged",(t,n,i)=>{this.checkListStates.value[t]=`${n?j.CHECK_LIST_IS_CHECKED_MARK:j.CHECK_LIST_IS_UNCHECKED_MARK}${j.CHECK_LIST_CONTENT_SEPARATOR}${i}`});this.inputValueState=t;const n=this.inputValueState.value.split(`
`);this.checkListStates=new M([]),n.forEach(i=>{i!==""&&this.checkListStates.value.push(i)})}get htmlTagName(){return"check-list-input-field"}onCreate(){this.$initHtml(),this.initListeners()}$initHtml(){this.$checkListContainer=this.select(".check-list-container"),this.$newCheckListItemInputContainer=this.select(".new-check-list-item-input-container"),this.$newCheckListItemInput=this.select(".new-check-list-item-input"),this.$appendCheckListItems()}initListeners(){this.checkListStates.addEventListener("change",this.onBulletPointsStateChanged),this.$newCheckListItemInput.addEventListener("keydown",t=>{t.key==="Enter"&&this.addNewCheckListItem()})}addNewCheckListItem(){const t=this.$newCheckListItemInput.value.trim();t.length>0&&(this.checkListStates.value.push(j.CHECK_LIST_IS_UNCHECKED_MARK+j.CHECK_LIST_CONTENT_SEPARATOR+t),this.$checkListContainer.insertBefore(this.$createCheckListItem(this.checkListStates.value.length-1),this.$newCheckListItemInputContainer),this.$newCheckListItemInput.value="")}};let G=j;o(G,"CHECK_LIST_CONTENT_SEPARATOR"," "),o(G,"CHECK_LIST_IS_CHECKED_MARK","[X]"),o(G,"CHECK_LIST_IS_UNCHECKED_MARK","[-]");class Xt extends Error{constructor(e,t,n,i){super(`Invalid check list item: ${e}
    
    Is the item of the following format?
    - ${G.CHECK_LIST_IS_CHECKED_MARK}${G.CHECK_LIST_CONTENT_SEPARATOR}example content
    - ${G.CHECK_LIST_IS_UNCHECKED_MARK}${G.CHECK_LIST_CONTENT_SEPARATOR}example content
    
    Detailed error:
    - fullCheckListString: ${t}
    - checkListItem: ${e}
    - isChecked: ${n}
    - content: ${i}
    `)}}const en=Object.freeze(Object.defineProperty({__proto__:null,default:G,InvalidCheckListItemError:Xt},Symbol.toStringTag,{value:"Module"}));class Jt extends k{constructor(t){var n;super(Ve,je);o(this,"blockContentState");o(this,"inputValueState");o(this,"$title");o(this,"$inputFieldContainer");o(this,"$inputField");o(this,"appendInputField",t=>{if(t===at.FreeText)this.$inputField=new Kt(this.inputValueState);else if(t===at.BulletPoint)this.$inputField=new zt(this.inputValueState);else if(t===at.Checkbox)this.$inputField=new G(this.inputValueState);else throw new Error(`Unknown input type: ${t}`);this.$inputFieldContainer.appendChild(this.$inputField)});o(this,"onBlockContentStateChanged",t=>{t.property==="value.title"?this.$title.innerHTML=this.blockContentState.value.title:t.property});this.blockContentState=t,this.inputValueState=new M((n=this.blockContentState.value.inputValue)!=null?n:"")}get htmlTagName(){return"editor-block"}onCreate(){this.$initHtml(),this.intiListeners()}$initHtml(){this.$title=this.select(".title"),this.$inputFieldContainer=this.select(".input-field-container"),this.$title.innerHTML=this.blockContentState.value.title,this.appendInputField(this.blockContentState.value.inputType)}intiListeners(){this.blockContentState.addEventListener("change",t=>this.onBlockContentStateChanged(t.data)),this.inputValueState.addEventListener("change",t=>{jt("inputValueState changed",t.data),this.blockContentState.value.inputValue=this.inputValueState.value})}}const nn=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"})),on=`note-editor{width:65%;flex-grow:1}.editor{width:100%;flex-grow:1;display:flex;justify-content:center;padding-top:var(--spacing-medium);padding-left:var(--spacing-editor-side);overflow-y:scroll}.editor-blocks-container{display:flex}.editor-blocks-container>*{margin-right:auto}check-list-item{margin-left:0;padding-left:0;list-style:none!important}.editor input{margin-top:var(--spacing-small);width:15em}.editor #edit-template-icon{position:absolute;right:2em;bottom:1em;left:auto;top:auto;background-color:var(--background-primary);border-radius:50%}
`,sn=`<div class="calendar-day border">
    <span class="date" ></span>
</div>`,an=`calendar-day{display:flex;flex-grow:1;border-radius:10px;overflow:hidden}.calendar-day{width:130px;height:80px;display:flex;justify-content:center;align-items:center}.calendar-day>.date{margin:0}.calendar-day:hover{background:var(--text-accent-hover)}
`,Dt=class extends k{constructor(t,n){super(sn,an);o(this,"entryDate");o(this,"currentDate");o(this,"isSelected",new M(!1));o(this,"$entryTitle");o(this,"onDayItemClicked",()=>{z.notifyAll(Dt.CALENDAR_DAY_CLICKED_EVENT,this.currentDate),this.isSelected.value=!0,z.notifyAll("setColor",this.entryDate)});o(this,"checkClickedItem",t=>{t.data!==this.entryDate&&(this.isSelected.value=!1)});o(this,"setColor",()=>{this.isSelected.value?this.style.background="var(--text-accent)":this.style.background="var(--background-primary)"});this.entryDate=t,this.currentDate=n}get htmlTagName(){return"calendar-day"}onCreate(){this.$initHtml(),this.$entryTitle.innerText=this.entryDate,this.initListeners()}$initHtml(){this.$entryTitle=this.select(".date")}initListeners(){this.addEventListener("click",this.onDayItemClicked),z.addEventListener("setColor",this.checkClickedItem),this.isSelected.addEventListener("change",this.setColor)}};let ft=Dt;o(ft,"CALENDAR_DAY_CLICKED_EVENT","calendarDayClicked");const rn=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"})),Mt=class extends k{constructor(){super(Re,on);o(this,"editorModelState");o(this,"$editor");o(this,"$editorBlocksContainer");o(this,"$editTemplateIcon");o(this,"$onEditTemplateClicked",()=>{z.notifyAll(Mt.EDIT_TEMPLATE_CLICKED_EVENT,{})})}get htmlTagName(){return"note-editor"}onCreate(){return this.$toggleLoading(!0),this.initData().then(()=>{this.$initHtml(),this.initListeners()})}async initData(){if(!nt.hasState(ut.editorModel)){const t=await A.getEditorModel(new Date);if(t)nt.addState(t.toState(),ut.editorModel);else throw new Error("Could not load editor model")}this.editorModelState=nt.getStateById(ut.editorModel)}$initHtml(){this.$editor=this.select(".editor"),this.$editorBlocksContainer=this.select(".editor-blocks-container"),this.$appendEditorBlocks(),this.$editTemplateIcon=this.select("#edit-template-icon")}$toggleLoading(t){}$appendEditorBlocks(){this.editorModelState.value.blockContents.forEach((t,n)=>{const i=this.editorModelState.createSubState(`value.blockContents.${n}`);this.$editorBlocksContainer.insertBefore(new Jt(i),this.select(".spacer"))}),this.$toggleLoading(!1)}initListeners(){this.$editor.addEventListener("click",()=>{z.notifyAll(vt,{})}),this.$editTemplateIcon.addEventListener("click",()=>this.$onEditTemplateClicked()),this.editorModelState.addEventListener("change",t=>{const n=t.data;n.currentPath===""?(this.$editorBlocksContainer.querySelectorAll("editor-block").forEach(i=>{i.remove()}),this.$appendEditorBlocks()):n.property==="inputValue"&&A.updateEditorModel(this.editorModelState.value)}),z.addEventListener(ft.CALENDAR_DAY_CLICKED_EVENT,t=>{const n=t.data;this.$toggleLoading(!0),A.getEditorModel(n).then(i=>{this.editorModelState.value=i})})}};let mt=Mt;o(mt,"EDIT_TEMPLATE_CLICKED_EVENT","edit-template-clicked");const ln=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),cn="change",un=`modal-component{position:absolute;top:0;left:0;right:0;bottom:0;background:none!important}.modal-content-container{width:60%;height:90%;display:flex;overflow:hidden;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;border:3px solid var(--border-color);border-radius:15px}.modal-bg{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#00000080}
`,dn=`<div class="modal-bg" hidden></div>
<div class="modal-content-container container" hidden></div>
`,ct=class extends k{constructor(t){super(dn,un);o(this,"$contentContainer");o(this,"$bg");o(this,"$content");o(this,"isOpenState",new M(!1));o(this,"onOpenStateChanged",()=>{this.isOpen()?this.onOpen():this.onClose()});o(this,"close",()=>{this.isOpenState.value=!1});o(this,"onClose",()=>{this.hidden=!0,this.$contentContainer.hidden=!0,this.$bg.hidden=!0,this.notifyAll(ct.ON_CLOSE_EVENT),this.$content.onModalClose()});o(this,"setContent",t=>{this.$content.remove(),this.$content=t,this.$content.addEventListener(ct.DO_CLOSE_EVENT,this.close),this.append(t)});this.$content=t}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){this.hidden=!0,this.$contentContainer=this.select(".modal-content-container"),this.$bg=this.select(".modal-bg"),this.$contentContainer.append(this.$content)}initListener(){this.$bg.addEventListener("click",()=>this.close()),this.$content.addEventListener(ct.DO_CLOSE_EVENT,this.close),this.isOpenState.addEventListener(cn,this.onOpenStateChanged)}open(){this.isOpenState.value=!0}onOpen(){this.hidden=!1,this.$contentContainer.hidden=!1,this.$bg.hidden=!1,this.notifyAll(ct.ON_OPEN_EVENT)}onDestroy(){this.$content.remove()}get htmlTagName(){return"modal-component"}isOpen(){return this.isOpenState.value}toggle(){this.isOpenState.value=!this.isOpenState.value}};let Y=ct;o(Y,"ON_CLOSE_EVENT","on-close"),o(Y,"ON_OPEN_EVENT","on-open"),o(Y,"DO_CLOSE_EVENT","do-close");const hn=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));class Qt{constructor(){o(this,"$content");o(this,"onCloseCallback");o(this,"onOpenCallback")}setContent(e){return this.$content=e,this}onClose(e){return this.onCloseCallback=e,this}onOpen(e){return this.onOpenCallback=e,this}build(){const e=new Y(this.$content);return this.onCloseCallback&&e.addEventListener(Y.ON_CLOSE_EVENT,this.onCloseCallback),this.onOpenCallback&&e.addEventListener(Y.ON_OPEN_EVENT,this.onOpenCallback),document.querySelector("#app").append(e),e}}const pn=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"}));class Yt extends k{constructor(){super(Ne,Ae);o(this,"$templateConfiguratorModal");o(this,"userSettings");this.userSettings=nt.getStateById(ut.userSettingsModel)}get htmlTagName(){return"home-component"}onCreate(){this.$initHtml(),this.initListener()}$initHtml(){var t,n;this.$templateConfiguratorModal=new Qt().setContent(new lt((n=(t=this.userSettings)==null?void 0:t.value.settings)==null?void 0:n.template)).build()}initListener(){z.addEventListener(mt.EDIT_TEMPLATE_CLICKED_EVENT,()=>this.$templateConfiguratorModal.toggle())}}const fn=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),mn=()=>{const l=document.querySelector("#app");Tt.loadAll().then(()=>A.init()).then(()=>nt.init()).then(()=>e());async function e(){await t()}async function t(){await A.checkIfUserLoggedIn()?await n():await d()}async function n(){const h=await A.getUserSettingsModel();nt.addState(h.toState(),ut.userSettingsModel),h.settings.template.length===0?r():i(h.username)}async function i(h){s(),new rt().setMessage(`\u{1F44B} Welcome back ${h}!`).setType(N.Info).setDuration(Z.Short).show()}async function s(){l.innerHTML="",l.append(new Yt)}async function r(){c(),new rt().setMessage("\u{1F389} Welcome, please configure your template!").setType(N.Info).setDuration(Z.Medium).show()}function c(){l.innerHTML="";const h=new lt;h.addEventListener(lt.FINISH_TEMPLATE_CONFIGURATION_EVENT,()=>{s()}),l.append(h)}async function d(){new rt().setMessage("\u{1F44B} Bye bye - see you soon!").setType(N.Info).setDuration(Z.Short).show(),f()}function f(){l.innerHTML="";const h=new Ht;l.append(h)}};mn();export{ft as C,A as D,z as E,nt as G,Yt as H,Qt as M,cn as S,rt as T,k as W,ut as a,Y as b,N as c,Z as d,oe as e,M as f};
