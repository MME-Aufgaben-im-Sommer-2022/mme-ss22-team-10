var r=Object.defineProperty;var o=(n,i,t)=>i in n?r(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t;var e=(n,i,t)=>(o(n,typeof i!="symbol"?i+"":i,t),t);import{W as u}from"./index.8d3f5313.js";import{E as s}from"./EventBus.9b451a44.js";import{C as l}from"./CloseAllEditorInputs.40019b73.js";const p=`<div class="live-text-input-container container">
  <span class="text-preview animate-slide"></span>
  <input type="text" class="text-input animate-slide" placeholder="type here..." maxlength="100" hidden></input>
</div>
`,h=`.live-text-input-container>.text-input.single-line{resize:none}.live-text-input-container>.text-input.multi-line{width:100%;resize:vertical}.live-text-input-container>.text-preview{flex-grow:1}.live-text-input-container>.live-text-input-container{cursor:pointer}
`;class c extends u{constructor(t,a){super(p,h);e(this,"$textPreview");e(this,"$textInput");e(this,"isSingleLine");e(this,"textValueState");e(this,"$setSingleLine",()=>{this.$textInput.setAttribute("rows","1"),this.$textInput.classList.add("single-line"),this.$textInput.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),this.toggleMode(!0))})});e(this,"$setMultiLine",()=>{this.$textInput.classList.add("multi-line")});e(this,"$onCloseAllEditorInputFields",t=>{t.triggerWebComponentId!==this.getWebComponentId()&&this.$textPreview.hidden&&this.toggleMode(!0)});e(this,"toggleMode",t=>{this.$textPreview.hidden=!t,this.$textInput.hidden=t,t?this.showTextPreview():this.showTextInput()});e(this,"showTextPreview",()=>{this.textValueState.value=this.$textInput.value,this.$textPreview.innerText=this.textValueState.value});e(this,"showTextInput",()=>{this.$textInput.value=this.textValueState.value,s.notifyAll(l,{triggerWebComponentId:this.getWebComponentId()})});this.textValueState=t,this.isSingleLine=a}get htmlTagName(){return"live-text-input"}onCreate(){this.$initHtml(),this.initListeners(),this.isSingleLine?this.$setSingleLine():this.$setMultiLine(),this.toggleMode(!0)}$initHtml(){this.$textPreview=this.select(".text-preview"),this.$textInput=this.select(".text-input"),this.$textPreview.innerText=this.textValueState.value,this.$textInput.value=this.textValueState.value}initListeners(){this.$textPreview.addEventListener("click",t=>{t.stopPropagation(),this.toggleMode(!1)}),this.$textInput.addEventListener("click",t=>{t.stopPropagation()}),s.addEventListener(l,t=>this.$onCloseAllEditorInputFields(t.data))}}export{c as default};
